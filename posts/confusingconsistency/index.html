<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Maryna Savchenko">
<meta name="description" content="Effective communication requires getting definitions right. Very often the same word can have different meanings and lead to confusion. Good example of that would be term Consistency. In this article we will take a look at consistency in CAP and ACID and differences between them.
Let&amp;rsquo;s start with defining CAP and ACID.
CAP theorem is formulated by computer scientist Eric Brewer in 2000, and states that a distributed data store cannot simultaneously provide more than two out of the following three guarantees:" />
<meta name="keywords" content=", cap, acid" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://savchenko.tech/posts/confusingconsistency/" />


    <title>
        
            Confusing Consistency: CAP vs ACID :: savchenko.tech  — software engineering blog by Maryna Savchenko
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.ff8f2a433956f170ddcd89f51cdbe2f59e48e7aedac5eca668389b0b2816b84e.css">




    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Confusing Consistency: CAP vs ACID">
<meta itemprop="description" content="Effective communication requires getting definitions right. Very often the same word can have different meanings and lead to confusion. Good example of that would be term Consistency. In this article we will take a look at consistency in CAP and ACID and differences between them.
Let&rsquo;s start with defining CAP and ACID.
CAP theorem is formulated by computer scientist Eric Brewer in 2000, and states that a distributed data store cannot simultaneously provide more than two out of the following three guarantees:"><meta itemprop="datePublished" content="2024-01-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2024-01-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="659"><meta itemprop="image" content="https://savchenko.tech/" />
<meta itemprop="keywords" content="cap,acid," />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://savchenko.tech/" /><meta name="twitter:title" content="Confusing Consistency: CAP vs ACID"/>
<meta name="twitter:description" content="Effective communication requires getting definitions right. Very often the same word can have different meanings and lead to confusion. Good example of that would be term Consistency. In this article we will take a look at consistency in CAP and ACID and differences between them.
Let&rsquo;s start with defining CAP and ACID.
CAP theorem is formulated by computer scientist Eric Brewer in 2000, and states that a distributed data store cannot simultaneously provide more than two out of the following three guarantees:"/>



    <meta property="og:title" content="Confusing Consistency: CAP vs ACID" />
<meta property="og:description" content="Effective communication requires getting definitions right. Very often the same word can have different meanings and lead to confusion. Good example of that would be term Consistency. In this article we will take a look at consistency in CAP and ACID and differences between them.
Let&rsquo;s start with defining CAP and ACID.
CAP theorem is formulated by computer scientist Eric Brewer in 2000, and states that a distributed data store cannot simultaneously provide more than two out of the following three guarantees:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://savchenko.tech/posts/confusingconsistency/" /><meta property="og:image" content="https://savchenko.tech/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-13T00:00:00+00:00" /><meta property="og:site_name" content="savchenko.tech" />







    <meta property="article:published_time" content="2024-01-13 00:00:00 &#43;0000 UTC" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/posts/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">savchenko.tech</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner">
            
            <div class="submenu">
                <li class="dropdown">
                    <a href="/about/">
                        About Maryna
                    </a>
                </li>
            </div>
            
        
            
            <div class="submenu">
                <li class="dropdown">
                    <a href="/contactinformation/">
                        Contact Information
                    </a>
                </li>
            </div>
            
        
            
            <div class="submenu">
                <li class="dropdown">
                    <a href="/posts/">
                        Posts
                    </a>
                </li>
            </div>
            
        
            
            <div class="submenu">
                <li class="dropdown">
                    <a href="/tags/">
                        Tags
                    </a>
                </li>
            </div>
            
        

    
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <i class="fa-solid fa-clock"></i>
        4 minutes
        <i class="fa-solid fa-clipboard"></i>
        659 Words
        
      </p>
      <p>
        <i class="fa-solid fa-calendar-days"></i>
        
          2024-01-13
        

         
          
        
      </p>
      <p>
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://savchenko.tech/tags/cap/">cap</a></span>
        <span class="tag"><a href="https://savchenko.tech/tags/acid/">acid</a></span>
        
    </p>

      
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://savchenko.tech/posts/confusingconsistency/">Confusing Consistency: CAP vs ACID</a>
      </h1>

      

      

      

      <div class="post-content">
        <p><img src="../../images/consistency3.png" alt="consistency3.png"></p>
<p>Effective communication requires getting definitions right.
Very often the same word can have different meanings and lead to confusion. Good example of that would be term Consistency.
In this article we will take a look at consistency in CAP and ACID and differences between them.</p>
<p>Let&rsquo;s start with defining CAP and ACID.</p>
<blockquote>
<p><strong>CAP theorem</strong> is formulated by computer scientist Eric Brewer in 2000, and states that a distributed
data store cannot simultaneously provide more than two out of the following three guarantees:</p>
<p>Consistency (C):
Every read receives the most recent write or an error. In a consistent system, all nodes in the system have the same data
view at any given point in time.</p>
<p>Availability (A):
Every request is guaranteed to receive a response, without the guarantee that it contains the most recent version
of the information.</p>
<p>Partition Tolerance (P):
The system continues to operate despite network partitions that may cause communication failures between nodes.</p>
</blockquote>
<blockquote>
<p><strong>ACID</strong> represents a set of properties that guarantee the reliability and correctness of transactions in database systems.</p>
<p>Atomicity (A):
Ensures that a transaction is treated as a single, indivisible unit of work.</p>
<p>Consistency (C):
Ensures that a transaction brings the database from one valid state to another.</p>
<p>Isolation (I):
Ensures that multiple transactions can execute concurrently without interfering with each other.</p>
<p>Durability (D):
Guarantees that once a transaction is committed, its changes are permanent and will survive subsequent failures,
such as system crashes or power outages.</p>
</blockquote>
<p>So, in the CAP theorem, the word consistency is used in the meaning of linearizability.
And in the context of ACID, consistency refers to an application-specific notion of the database being in a “good state.”
Let&rsquo;s dive deeper in each oh them.</p>
<p>What is linearizability?</p>
<p><strong>Linearizability</strong> (also known as atomic consistency, strong consistency, immediate consistency, or external consistency)
is a recency guarantee on reads and writes of an individual object. It is a strong consistency model.
So if you ask different replicas the same question, you will receive the same answer.</p>
<p>Let&rsquo;s take a look at nonlinearizable system example:</p>
<p><img src="../../images/consistency4.png" alt="consistency4.png"></p>
<ol>
<li>Friends Bob and Alice discuss going on vacation and book accommodation.</li>
<li>During their discussion John books the accommodation that Bob and Alice were looking at.</li>
<li>When Bob refreshes the page, he sees that it is still available because he reads from the other replica
that has not been updated yet.</li>
<li>Alice after the refresh sees that accommodation is not available because she reads from the first replica that has the most recent update.</li>
</ol>
<p>The fact that Bob&rsquo;s query returned a stale state is an example of linearizability violation.</p>
<p>Next image will show the same scenario on linearizable system:</p>
<p><img src="../../images/consistency5.png" alt="consistency5.png"></p>
<p>In linearizable system once a new value has been written, all subsequent reads see the value that was written,
until it is overwritten again. This means that the system acts as if there is only one replica.</p>
<p><strong>ACID Consistency</strong> is nothing that database can fully guarantee (except some uniqueness constraints, etc.).
It’s the application’s responsibility to define its transactions correctly so that they preserve consistency.
In most cases if you write bad data, the database can not stop you.</p>
<p>Let&rsquo;s take a look at ACID consistency compliance example:</p>
<p><img src="../../images/consistency6.png" alt="consistency6.png"></p>
<p>Each step is successfully completed before moving to the next, ensuring database consistency throughout the transaction.
If any step fails, the transaction is rolled back, maintaining the consistency of the database.</p>
<p>If the payment processing will fail and the system doesn&rsquo;t roll back the initial reservation it will lead to inconsistency
in the database.</p>
<p>So, CAP Consistency means linearizability and ACID Consistency is application’s responsibility and nothing that database
can guarantee. It’s unfortunate that the same word is used with many meanings. We took a look at only 2 examples and there are
also eventual consistency and consistent hashing.
This is why having precise and clear definitions is crucial especially when the term is overloaded.
<a href="https://martin.kleppmann.com/">Martin Kleppman</a> did amazing job in untangling many os these terms.</p>
<p>Sources:</p>
<ol>
<li><a href="https://www.amazon.de/-/en/Designing-Data-Intensive-Applications-Reliable-Maintainable/dp/1449373321">Designing Data-Intensive Applications by Martin Kleppmann</a>.</li>
</ol>

      </div>
    </article>
      <hr />
    <div class="post-info">
      
    <div class="pagination">
        
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://savchenko.tech/posts/dataoriented/">
                    <span class="button__icon">←</span>
                    <span class="button__text">The Power of Data Oriented Programming in Java</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://savchenko.tech/posts/blockchaincomparison/">
                    <span class="button__text">Blockchains Comparison</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>

    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    
    
    
        <div class="footer__inner">
          
        </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.5ee1ab43459d21e9512c2083459b5796fb878237404ac6c6cc916fb66997828afaba1f6f4e050e174e96d13c0a7df7bda9e4296a89ee19bb7ffa0a4129583cd2.js" integrity="sha512-XuGrQ0WdIelRLCCDRZtXlvuHgjdASsbGzJFvtmmXgor6uh9vTgUOF06W0TwKffe9qeQpaonuGbt/&#43;gpBKVg80g=="></script>



    </body>
</html>
